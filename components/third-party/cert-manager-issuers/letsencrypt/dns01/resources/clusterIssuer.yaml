apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: ${clusterIssuerName}
spec:
  acme:
    email: ${accountEmail}
    server: ${acmeServer}
    skipTLSVerify: false
    privateKeySecretRef:
      name: ${privateKeySecretName}
    solvers:
      - dns01:
          azureDNS:
            clientID: "${DNS_SP_ID}"
            clientSecretSecretRef:
              key: client-secret
              name: azure-dns-secret
            subscriptionID: "${AZ_SUBSCRIPTION_ID}"
            tenantID: "${DNS_SP_TENANT_ID}" # The id of the tenant which host the dns service principal. Ex: az ad sp show --id http://radix-dns-dev --query appOwnerTenantId
            resourceGroupName: "${AZ_RESOURCE_GROUP_COMMON}"
            hostedZoneName: "${AZ_RESOURCE_DNS}"
            # Azure Cloud Environment, default to AzurePublicCloud
            environment: AzurePublicCloud
        