apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: my-app
  namespace: default
spec:
  interval: 15m
  path: "./deploy/prod"
  prune: true
  sourceRef:
    kind: GitRepository
    name: my-app
# apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
# kind: Kustomization
# metadata:
#   name: variables
#   namespace: default
# spec:
#   interval: 5m
#   postBuild:
#     substitute:
#       clusterName: "olemarkusflux"
#       dnsZone: "dev.radix.equinor.com"
    # substituteFrom:
    #   - kind: ConfigMap
    #     name: radix-platform-config

# configMapGenerator:
# - env: properties/cluster.properties
#   name: cluster-properties
#   namespace: kustomize
# vars:
# - fieldref:
#     fieldPath: data.DOMAIN
#   name: DOMAIN
#   objref:
#     apiVersion: v1
#     kind: ConfigMap
#     name: cluster-properties
# - fieldref:
#     fieldPath: data.CLUSTER_NAME
#   name: CLUSTER_NAME
#   objref:
#     apiVersion: v1
#     kind: ConfigMap
#     name: cluster-properties
