apiVersion: source.toolkit.fluxcd.io/v1beta1
kind: HelmChart
metadata:
  name: radix-acr-cleanup
  namespace: default
spec:
  chart: ./charts/radix-acr-cleanup
  sourceRef:
    name: radix-acr-cleanup
    kind: GitRepository
  interval: 10m
  values:
    registry: radixdev
    deleteUntagged: false
    performDelete: true
    period: 1h
    cleanupStart: "0:00"
    cleanupEnd: "06:00"
    image:
      # For Flux "image.repository" means full path to the image (registry/repository)
      # The following 2 properties are mandatory for Flux image filtering
      repository: radixdev.azurecr.io/radix-acr-cleanup
      tag: "master-bd3b024df51ecd6d4e75d7dc16d69955f2de0687"
    metrics:
      enabled: true
    resources:
      limits:
        cpu: "2"
        memory: 150Mi
      requests:
        cpu: 50m
        memory: 150Mi
    valuesFrom:
    - configMapKeyRef:
      name: "radix-platform-config"
      key: "platform"
      optional: false
