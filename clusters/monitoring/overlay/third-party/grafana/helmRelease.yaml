apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: grafana
  namespace: monitor
spec:
  chart:
    spec:
      version: 6.58.9 # https://artifacthub.io/packages/helm/grafana/grafana
  values:
    resources:
      requests:
        cpu: "0.2"
        memory: "200Mi"
    envFromSecret: null
    ingress:
      annotations:
        kubernetes.io/tls-acme: "true"
    env:
      GF_DATABASE_HOST: s940-radix-grafana-extmon-prod.mysql.database.azure.com
      GF_DATABASE_NAME: grafana
      GF_DATABASE_USER: grafana
      GF_AUTH_GENERIC_OAUTH_CLIENT_ID: 8d25ce2e-aa30-4834-93dc-292645bf2918
  valuesFrom:
  - kind: Secret
    name: kube-prometheus-stack-helm-secret
    valuesKey: config
